<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Retex - CRTP (FR) | Kransy</title>
<meta name="keywords" content="">
<meta name="description" content="1. Présentation de la CRTP et du bootcamp 1. Séance 1 2. Séance 2 3. Séance 3 et 4 2. Mon expérience avec l&rsquo;AD avant la CRTP 3. Mon expérience du lab d&rsquo;entraînement 3. Remerciements 4. Ressources utiles supplémentaires CRTP : https://www.alteredsecurity.com/adlab CRTP &#43; Bootcamp : https://www.alteredsecurity.com/crtp-bootcamp Présentation de la CRTP et du bootcamp La CRTP ou Certified Red Team Professionnal est une certification niveau &ldquo;débutant&rdquo; en Active Directory. Dans celle-ci, on apprend les bases de l&rsquo;AD, les principales attaques (orientées misconfigurations) ainsi que certaines méthodes pour défendre son AD.">
<meta name="author" content="Kransy">
<link rel="canonical" href="https://kransy.cyberkoopas.fr/certifications/crtp/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5c17b8ba2228e45e46dc18a39133aaf8bfd6c18b7cd45b91ad436dd85229d056.css" integrity="sha256-XBe4uiIo5F5G3BijkTOq&#43;L/WwYt81FuRrUNt2FIp0FY=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://kransy.cyberkoopas.fr/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://kransy.cyberkoopas.fr/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kransy.cyberkoopas.fr/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://kransy.cyberkoopas.fr/apple-touch-icon.png">
<link rel="mask-icon" href="https://kransy.cyberkoopas.fr/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Retex - CRTP (FR)" />
<meta property="og:description" content="1. Présentation de la CRTP et du bootcamp 1. Séance 1 2. Séance 2 3. Séance 3 et 4 2. Mon expérience avec l&rsquo;AD avant la CRTP 3. Mon expérience du lab d&rsquo;entraînement 3. Remerciements 4. Ressources utiles supplémentaires CRTP : https://www.alteredsecurity.com/adlab CRTP &#43; Bootcamp : https://www.alteredsecurity.com/crtp-bootcamp Présentation de la CRTP et du bootcamp La CRTP ou Certified Red Team Professionnal est une certification niveau &ldquo;débutant&rdquo; en Active Directory. Dans celle-ci, on apprend les bases de l&rsquo;AD, les principales attaques (orientées misconfigurations) ainsi que certaines méthodes pour défendre son AD." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kransy.cyberkoopas.fr/certifications/crtp/" /><meta property="article:section" content="certifications" />
<meta property="article:published_time" content="2023-06-06T12:34:43-04:00" />
<meta property="article:modified_time" content="2023-06-06T12:34:43-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Retex - CRTP (FR)"/>
<meta name="twitter:description" content="1. Présentation de la CRTP et du bootcamp 1. Séance 1 2. Séance 2 3. Séance 3 et 4 2. Mon expérience avec l&rsquo;AD avant la CRTP 3. Mon expérience du lab d&rsquo;entraînement 3. Remerciements 4. Ressources utiles supplémentaires CRTP : https://www.alteredsecurity.com/adlab CRTP &#43; Bootcamp : https://www.alteredsecurity.com/crtp-bootcamp Présentation de la CRTP et du bootcamp La CRTP ou Certified Red Team Professionnal est une certification niveau &ldquo;débutant&rdquo; en Active Directory. Dans celle-ci, on apprend les bases de l&rsquo;AD, les principales attaques (orientées misconfigurations) ainsi que certaines méthodes pour défendre son AD."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Certifications",
      "item": "https://kransy.cyberkoopas.fr/certifications/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Retex - CRTP (FR)",
      "item": "https://kransy.cyberkoopas.fr/certifications/crtp/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Retex - CRTP (FR)",
  "name": "Retex - CRTP (FR)",
  "description": "1. Présentation de la CRTP et du bootcamp 1. Séance 1 2. Séance 2 3. Séance 3 et 4 2. Mon expérience avec l\u0026rsquo;AD avant la CRTP 3. Mon expérience du lab d\u0026rsquo;entraînement 3. Remerciements 4. Ressources utiles supplémentaires CRTP : https://www.alteredsecurity.com/adlab CRTP + Bootcamp : https://www.alteredsecurity.com/crtp-bootcamp Présentation de la CRTP et du bootcamp La CRTP ou Certified Red Team Professionnal est une certification niveau \u0026ldquo;débutant\u0026rdquo; en Active Directory. Dans celle-ci, on apprend les bases de l\u0026rsquo;AD, les principales attaques (orientées misconfigurations) ainsi que certaines méthodes pour défendre son AD.",
  "keywords": [
    
  ],
  "articleBody": " 1. Présentation de la CRTP et du bootcamp 1. Séance 1 2. Séance 2 3. Séance 3 et 4 2. Mon expérience avec l’AD avant la CRTP 3. Mon expérience du lab d’entraînement 3. Remerciements 4. Ressources utiles supplémentaires CRTP : https://www.alteredsecurity.com/adlab CRTP + Bootcamp : https://www.alteredsecurity.com/crtp-bootcamp Présentation de la CRTP et du bootcamp La CRTP ou Certified Red Team Professionnal est une certification niveau “débutant” en Active Directory. Dans celle-ci, on apprend les bases de l’AD, les principales attaques (orientées misconfigurations) ainsi que certaines méthodes pour défendre son AD. D’autant plus qu’elle est d’actualité étant donné que les environnements sont des serveurs windows full patch.\nCette certification est EXCELLENTE pour toute personnes souhaitant commencer à faire du pentest AD. Seul petit regret, c’est que l’on utilise uniquement Windows et les outils disponibles sur Windows et pas ceux de Linux (crackmapexec, impacket, … car ils ont un lab spécial .. donc normal) mais ca apporte une vision complète, donc une fois que c’est maitrisé avec windows, vous aurez pas trop de soucis pour transitionner et utiliser des outils Linux.\nDans mon cas, j’ai pris le package bootcamp et passage de certification pour la réaliser. Ce package permet d’avoir un cours par semaine pendant 1 mois, le dimanche de 2-3h avec Nikhil “SamratAshok” Mittal, qui est une brute en AD. Il explique le cours, démontre les attaques dans le lab et répond à vos questions, ce qui est un énorme avantage ! Ces interactions avec lui permettent d’encore mieux comprendre le cours de la CRTP (qui est aussi donné sans le bootcamp quand on prend juste la certif).\nL’un des plus grands avantages à part celui cité, c’est que cela permets d’avoir un rythme de travail. Nikhil divise le cours en 4 séances, ce qui fait que vous pouvez suivre le même rythme que lui pour réussir à finir le cours ainsi que le lab, et passer votre examen sans trop de doute.\nVous avez aussi la possibilité de faire le lab avec un C2 : Covenant, un manuel du lab fait avec Covenant est aussi dispo, mais Nikhil ne l’abordera pas (puisque ce n’est pas vraiment le but premier), cependant si vous avez des questions, soit lui soit le support pourront y répondre.\nSéance 1 La première séance de cours marque aussi le début du lab, dans cette première séance, il reprend les bases de l’AD :\nintroduction structure méthodologie énumération L’utilisation de powershell (qui sera votre outil principal dans cette certification) Le bypass d’AV L’escalade de privilège Windows classique via PowerUp Cela vous donne les bases pour commencer à travailler et à expérimenter sur le lab d’entraînement avant le 2ème cours. Je vous conseille de toujours prendre de l’avance sur son cours et sur les exercices, dans le sens où, vous comprendrez plus facilement ce qu’il va expliquer à l’oral si vous l’avez déjà lu, chercher sur internet, et compris un peu les principes. Ensuite, quand il expliquera, si vous comprenez et que ce que vous avez compris correspond à ce qu’il explique, c’est parfait, sinon, ca vous remettra les idées dans le bon chemin ! Si vous n’arrivez pas à comprendre, n’hésitez pas à poser des questions, Nikhil est un ange qui répond à tout le monde !\nSéance 2 La deuxième séance de cours aborde les sujets de :\nmouvements latéraux (Utilisation de Mimikatz, Powershell Remoting, Tradecraft, Overpass-The-Hash, …) qui vous sera très utile après avoir obtenu un compte local administrateur d’une machine pour pivoter dans le réseau Offensive .NET (modification de scripts powershells ou de code source pour bypass Defender, …) qui vous sera aussi très utile pour bypass Defender qui tournent .. sur tout le lab ! De même, si vous avez pris du retard, n’hésitez pas à le rattraper à ce moment tant que le “sérieux” n’a pas encore démarré, et si vous avez des questions sur l’AD que vous n’avez pas compris de la séance 1, n’hésitez pas à les poser en début de séance, Nikhil, l’ange de l’AD, laisse du temps au début et à la fin des séances pour répondre à des questions en plus de répondre aux questions durant le cours !\nSéance 3 et 4 C’est le moment où j’avais bien avancé / accéléré, ducoup j’ai pas fais de différence entre les deux séances sorry. Ces dernières séances de cours abordent :\nles persistances : silver, gold, diamond tickets, ACLs, SSP, skeleton keys.. vous comprendrez enfin tout ces termes ainsi que leur fonctionnement, et comment les réaliser. Certains sont plus ou moins verbeux que d’autres, et ca vous le saurait pendant le lab ! les priviliges escalations en AD : comment passer Domain Admin ! Pour cela, il va aborder le kerberoasting (spn/as-rep) ainsi que les délégations Kerberos qui sont les techniques principales pour priv esc, faire des mouvements latéraux, priv esc, etc.. jusqu’à devenir Domain Admin ! Prenez bien le temps d’expérimenter chacune de ces attaques sur le lab, c’est important de comprendre les tenants et les aboutissants de ces techniques pour ne pas avoir de soucis avec, et comprendre les erreurs qui pourraient survenir. la privilege escalation pour devenir Enterprise Admin ! Eh oui, si vous pensiez que Domain Admin était le graal pour un pentest interne, attendait d’être Enterprise Admin, c’est encore mieux ! On y verra et on y comprendra les relations de confiance entre les forets, comment les abuser (les trusts abuses, via MSSQL, et autre), mais aussi à travers les domaines et d’un domaine enfant à un domaine parent ! l’AD CS : Qui est un véritable quick win dans une forêt. Ca permets des priv esc à travers les relations de confiance des domaines, dans un domaine, .. un peu tout quoi, donc on peut potentiellement passer de user à Domain Admin à Enterprise Admin via l’AD CS en fonction des templates et si celles-i sont vulnérables ! Défendre son AD ! La CRTP n’est pas que pour attaquer, elle permet de comprendre l’AD, les attaques, oui, mais aussi la défendre ! Il montre et explique les best practices pour détecter, défendre son AD et protéger les Domain Admins que ce soit via des protections mais aussi via des architectures à mettre en place (ESAE, Tier Model …) qui sont tout aussi important pour savoir attaquer un AD, savoir le défendre ET savoir l’attaquer sont important dans les deux camps ! Mon expérience avec l’AD avant la CRTP TryHackMe : Jr Pentester learning path (un peu d’AD mais j’avais pas bien saisi les concepts) HackTheBox : des box easy de TJNull mais rien en AD Dante (un peu d’AD) Mon expérience du lab d’entraînement Sur un lab d’entraînement, il y a généralement un nombre fixe d’étudiants (je crois 5), les labs peuvent être reset très facilement en envoyant un message au support (qui répondent super vite) et même si vous avez des questions, le support est aussi compétent pour y répondre.\nPendant mon bootcamp, j’ai énormément interagis avec la communauté et avec Nikhill, que ce soit pour poser des questions ou pour y répondre. Ca m’a permis de consolider mes connaissances et de connaître des partenaires de travail ! On avait un petit groupe avec une ambiance très cool, beaucoup d’entraide et on a tous réussi sans trop de soucis l’examen.\nJ’ai réalisé le lab d’entraînement en suivant le planning de Nikhil, puis en accélérant quand j’étais confortable. La plupart, si ce n’est la totalité des attaques apprises sont réalisable sur le lab d’entraînement. Un schéma des attaques possibles et des chemins pour devenir Domain Admin est donné, vous pouvez aussi vous en servir si vous pensez avoir rater un chemin ou si vous êtes perdu !\nPour ma part, j’ai répondu à toute les questions qui sont avec le lab d’entraînement, puis je me suis amusé pendant 3-4 jours à reproduire toute les attaques et à vérifier que je savais “tout” d’elles, que si j’avais un soucis, je saurai le résoudre et ainsi de suite. J’ai lancé mon examen une semaine avant la fin du lab, pour que si jamais je le ratais, je pouvais me re-entraîner pendant une semaine avant de le re-tenter.\nPassage de l’examen le 1er février 2023, réussi, aucune “surprise”, tout ce qui est à l’examen est dans le cours.\nRemerciements La CRTP m’a énormément aidé pour comprendre l’AD, je n’y comprenais pas grand chose. Ca m’a permis de réaliser le pro lab HTB “Offshore” pour confirmer mes connaissances en AD et transitionner / apprendre à utiliser les outils sur Linux (Crackmapexec / Impacket / …).\nLa certification en vaux vraiment le coup, pour moi c’est un Must DO pour les personnes voulant faire de l’AD. La certification est totalement overkill pour l’OSCP, donc avec ça, vous êtes au moins sûr que l’AD de l’OSCP est du beurre comparé à celui de la CRTP !\nMerci à Nikhil pour avoir créer la CRTP ainsi qu’au support de la CRTP pour leur réponse rapide et efficace, ils sont super réactifs et même pour les questions de cours ou de compréhension, ils ont réponses à tout, ce sont des perles !\nRessources utiles supplémentaires TheHackerRecipies : https://www.thehacker.recipes/ ADSecurity : https://adsecurity.org/ Si vous avez des questions sur ce qui est abordé dans le cours ou la comparaison avec l’OSCP, n’hésitez pas à me contacter sur Discord !\nPS : Un retex “oral” a été réalisé par Xn0 sur le discord des meetups HTB que je conseille à tout le monde de rejoindre. Il a réalisé un retex CRTP et CRTE (le grand frère de la CRTP), retex accessible aux personnes inscrites sur le discord meetup HTB que vous pouvez rejoindre en suivant les instructions sur meetup : https://www.meetup.com/hack-the-box-meetup-france/\n",
  "wordCount" : "1608",
  "inLanguage": "en",
  "datePublished": "2023-06-06T12:34:43-04:00",
  "dateModified": "2023-06-06T12:34:43-04:00",
  "author":{
    "@type": "Person",
    "name": "Kransy"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kransy.cyberkoopas.fr/certifications/crtp/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kransy",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kransy.cyberkoopas.fr/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kransy.cyberkoopas.fr/" accesskey="h" title="Kransy (Alt + H)">
                <img src="https://kransy.cyberkoopas.fr/logo.png" alt="" aria-label="logo"
                    height="30">Kransy</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kransy.cyberkoopas.fr/writeups/" title="Writeups">
                    <span>Writeups</span>
                </a>
            </li>
            <li>
                <a href="https://kransy.cyberkoopas.fr/cheatsheets/" title="Cheatsheets">
                    <span>Cheatsheets</span>
                </a>
            </li>
            <li>
                <a href="https://kransy.cyberkoopas.fr/certifications/" title="Retex">
                    <span>Retex</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Retex - CRTP (FR)
    </h1>
    <div class="post-meta"><span title='2023-06-06 12:34:43 -0400 -0400'>June 6, 2023</span>&nbsp;·&nbsp;Kransy

</div>
  </header> 
  <div class="post-content"><ul>
<li><a href="#pr%C3%A9sentation-de-la-crtp-et-du-bootcamp">1. Présentation de la CRTP et du bootcamp</a>
<ul>
<li><a href="#s%C3%A9ance-1">1. Séance 1</a></li>
<li><a href="#s%C3%A9ance-2">2. Séance 2</a></li>
<li><a href="#s%C3%A9ance-3-et-4">3. Séance 3 et 4</a></li>
</ul>
</li>
<li><a href="#mon-exp%C3%A9rience-avec-lad-avant-la-crtp">2. Mon expérience avec l&rsquo;AD avant la CRTP</a></li>
<li><a href="#mon-exp%C3%A9rience-du-lab-dentra%C3%AEnement">3. Mon expérience du lab d&rsquo;entraînement</a></li>
<li><a href="#remerciements">3. Remerciements</a></li>
<li><a href="#ressources-utiles-suppl%C3%A9mentaires">4. Ressources utiles supplémentaires</a></li>
</ul>
<hr>
<pre><code>CRTP : https://www.alteredsecurity.com/adlab
CRTP + Bootcamp : https://www.alteredsecurity.com/crtp-bootcamp
</code></pre>
<h2 id="présentation-de-la-crtp-et-du-bootcamp">Présentation de la CRTP et du bootcamp<a hidden class="anchor" aria-hidden="true" href="#présentation-de-la-crtp-et-du-bootcamp">#</a></h2>
<p>La CRTP ou Certified Red Team Professionnal est une certification niveau &ldquo;débutant&rdquo; en Active Directory. Dans celle-ci, on apprend les bases de l&rsquo;AD, les principales attaques (orientées misconfigurations) ainsi que certaines méthodes pour défendre son AD. D&rsquo;autant plus qu&rsquo;elle est d&rsquo;actualité étant donné que les environnements sont des serveurs windows full patch.</p>
<p>Cette certification est EXCELLENTE pour toute personnes souhaitant commencer à faire du pentest AD. Seul petit regret, c&rsquo;est que l&rsquo;on utilise uniquement Windows et les outils disponibles sur Windows et pas ceux de Linux (crackmapexec, impacket, &hellip; car ils ont un lab spécial .. donc normal) mais ca apporte une vision complète, donc une fois que c&rsquo;est maitrisé avec windows, vous aurez pas trop de soucis pour transitionner et utiliser des outils Linux.</p>
<p>Dans mon cas, j&rsquo;ai pris le package bootcamp et passage de certification pour la réaliser.
Ce package permet d&rsquo;avoir un cours par semaine pendant 1 mois, le dimanche de 2-3h avec Nikhil &ldquo;SamratAshok&rdquo; Mittal, qui est une brute en AD. Il explique le cours, démontre les attaques dans le lab et répond à vos questions, ce qui est un énorme avantage ! Ces interactions avec lui permettent d&rsquo;encore mieux comprendre le cours de la CRTP (qui est aussi donné sans le bootcamp quand on prend juste la certif).</p>
<p>L&rsquo;un des plus grands avantages à part celui cité, c&rsquo;est que cela permets d&rsquo;avoir un rythme de travail. Nikhil divise le cours en 4 séances, ce qui fait que vous pouvez suivre le même rythme que lui pour réussir à finir le cours ainsi que le lab, et passer votre examen sans trop de doute.</p>
<p>Vous avez aussi la possibilité de faire le lab avec un C2 : Covenant, un manuel du lab fait avec Covenant est aussi dispo, mais Nikhil ne l&rsquo;abordera pas (puisque ce n&rsquo;est pas vraiment le but premier), cependant si vous avez des questions, soit lui soit le support pourront y répondre.</p>
<h3 id="séance-1">Séance 1<a hidden class="anchor" aria-hidden="true" href="#séance-1">#</a></h3>
<p>La première séance de cours marque aussi le début du lab, dans cette première séance, il reprend les bases de l&rsquo;AD :</p>
<ul>
<li>introduction</li>
<li>structure</li>
<li>méthodologie</li>
<li>énumération</li>
<li>L&rsquo;utilisation de powershell (qui sera votre outil principal dans cette certification)</li>
<li>Le bypass d&rsquo;AV</li>
<li>L&rsquo;escalade de privilège Windows classique via PowerUp
Cela vous donne les bases pour commencer à travailler et à expérimenter sur le lab d&rsquo;entraînement avant le 2ème cours.</li>
</ul>
<p>Je vous conseille de toujours prendre de l&rsquo;avance sur son cours et sur les exercices, dans le sens où, vous comprendrez plus facilement ce qu&rsquo;il va expliquer à l&rsquo;oral si vous l&rsquo;avez déjà lu, chercher sur internet, et compris un peu les principes. Ensuite, quand il expliquera, si vous comprenez et que ce que vous avez compris correspond à ce qu&rsquo;il explique, c&rsquo;est parfait, sinon, ca vous remettra les idées dans le bon chemin ! Si vous n&rsquo;arrivez pas à comprendre, n&rsquo;hésitez pas à poser des questions, Nikhil est un ange qui répond à tout le monde !</p>
<h3 id="séance-2">Séance 2<a hidden class="anchor" aria-hidden="true" href="#séance-2">#</a></h3>
<p>La deuxième séance de cours aborde les sujets de :</p>
<ul>
<li>mouvements latéraux (Utilisation de Mimikatz, Powershell Remoting, Tradecraft, Overpass-The-Hash, &hellip;) qui vous sera très utile après avoir obtenu un compte local administrateur d&rsquo;une machine pour pivoter dans le réseau</li>
<li>Offensive .NET (modification de scripts powershells ou de code source pour bypass Defender, &hellip;) qui vous sera aussi très utile pour bypass Defender qui tournent .. sur tout le lab !</li>
</ul>
<p>De même, si vous avez pris du retard, n&rsquo;hésitez pas à le rattraper à ce moment tant que le &ldquo;sérieux&rdquo; n&rsquo;a pas encore démarré, et si vous avez des questions sur l&rsquo;AD que vous n&rsquo;avez pas compris de la séance 1, n&rsquo;hésitez pas à les poser en début de séance, Nikhil, l&rsquo;ange de l&rsquo;AD, laisse du temps au début et à la fin des séances pour répondre à des questions en plus de répondre aux questions durant le cours !</p>
<h3 id="séance-3-et-4">Séance 3 et 4<a hidden class="anchor" aria-hidden="true" href="#séance-3-et-4">#</a></h3>
<p>C&rsquo;est le moment où j&rsquo;avais bien avancé /  accéléré, ducoup j&rsquo;ai pas fais de différence entre les deux séances sorry.
Ces dernières séances de cours abordent :</p>
<ul>
<li>les persistances : silver, gold, diamond tickets, ACLs, SSP, skeleton keys.. vous comprendrez enfin tout ces termes ainsi que leur fonctionnement, et comment les réaliser. Certains sont plus ou moins verbeux que d&rsquo;autres, et ca vous le saurait pendant le lab !</li>
<li>les priviliges escalations en AD : comment passer Domain Admin ! Pour cela, il va aborder le kerberoasting (spn/as-rep) ainsi que les délégations Kerberos qui sont les techniques principales pour priv esc, faire des mouvements latéraux, priv esc, etc.. jusqu&rsquo;à devenir Domain Admin !
Prenez bien le temps d&rsquo;expérimenter chacune de ces attaques sur le lab, c&rsquo;est important de comprendre les tenants et les aboutissants de ces techniques pour ne pas avoir de soucis avec, et comprendre les erreurs qui pourraient survenir.</li>
<li>la privilege escalation pour devenir Enterprise Admin ! Eh oui, si vous pensiez que Domain Admin était le graal pour un pentest interne, attendait d&rsquo;être Enterprise Admin, c&rsquo;est encore mieux ! On y verra et on y comprendra les relations de confiance entre les forets, comment les abuser (les trusts abuses, via MSSQL, et autre), mais aussi à travers les domaines et d&rsquo;un domaine enfant à un domaine parent !</li>
<li>l&rsquo;AD CS : Qui est un véritable quick win dans une forêt. Ca permets des priv esc à travers les relations de confiance des domaines, dans un domaine, .. un peu tout quoi, donc on peut potentiellement passer de user à Domain Admin à Enterprise Admin via l&rsquo;AD CS en fonction des templates et si celles-i sont vulnérables !</li>
<li>Défendre son AD ! La CRTP n&rsquo;est pas que pour attaquer, elle permet de comprendre l&rsquo;AD, les attaques, oui, mais aussi la défendre ! Il montre et explique les best practices pour détecter, défendre son AD et protéger les Domain Admins que ce soit via des protections mais aussi via des architectures à mettre en place (ESAE, Tier Model &hellip;) qui sont tout aussi important pour savoir attaquer un AD, savoir le défendre ET savoir l&rsquo;attaquer sont important dans les deux camps !</li>
</ul>
<h2 id="mon-expérience-avec-lad-avant-la-crtp">Mon expérience avec l&rsquo;AD avant la CRTP<a hidden class="anchor" aria-hidden="true" href="#mon-expérience-avec-lad-avant-la-crtp">#</a></h2>
<ul>
<li>TryHackMe : Jr Pentester learning path (un peu d&rsquo;AD mais j&rsquo;avais pas bien saisi les concepts)</li>
<li>HackTheBox : des box easy de TJNull mais rien en AD</li>
<li>Dante (un peu d&rsquo;AD)</li>
</ul>
<h2 id="mon-expérience-du-lab-dentraînement">Mon expérience du lab d&rsquo;entraînement<a hidden class="anchor" aria-hidden="true" href="#mon-expérience-du-lab-dentraînement">#</a></h2>
<p>Sur un lab d&rsquo;entraînement, il y a généralement un nombre fixe d&rsquo;étudiants (je crois 5), les labs peuvent être reset très facilement en envoyant un message au support (qui répondent super vite) et même si vous avez des questions, le support est aussi compétent pour y répondre.</p>
<p>Pendant mon bootcamp, j&rsquo;ai énormément interagis avec la communauté et avec Nikhill, que ce soit pour poser des questions ou pour y répondre. Ca m&rsquo;a permis de consolider mes connaissances et de connaître des partenaires de travail ! On avait un petit groupe avec une ambiance très cool, beaucoup d&rsquo;entraide et on a tous réussi sans trop de soucis l&rsquo;examen.</p>
<p>J&rsquo;ai réalisé le lab d&rsquo;entraînement en suivant le planning de Nikhil, puis en accélérant quand j&rsquo;étais confortable. La plupart, si ce n&rsquo;est la totalité des attaques apprises sont réalisable sur le lab d&rsquo;entraînement. Un schéma des attaques possibles et des chemins pour devenir Domain Admin est donné, vous pouvez aussi vous en servir si vous pensez avoir rater un chemin ou si vous êtes perdu !</p>
<p>Pour ma part, j&rsquo;ai répondu à toute les questions qui sont avec le lab d&rsquo;entraînement, puis je me suis amusé pendant 3-4 jours à reproduire toute les attaques et à vérifier que je savais &ldquo;tout&rdquo; d&rsquo;elles, que si j&rsquo;avais un soucis, je saurai le résoudre et ainsi de suite. J&rsquo;ai lancé mon examen une semaine avant la fin du lab, pour que si jamais je le ratais, je pouvais me re-entraîner pendant une semaine avant de le re-tenter.</p>
<p>Passage de l&rsquo;examen le 1er février 2023, réussi, aucune &ldquo;surprise&rdquo;, tout ce qui est à l&rsquo;examen est dans le cours.</p>
<h2 id="remerciements">Remerciements<a hidden class="anchor" aria-hidden="true" href="#remerciements">#</a></h2>
<p>La CRTP m&rsquo;a énormément aidé pour comprendre l&rsquo;AD, je n&rsquo;y comprenais pas grand chose. Ca m&rsquo;a permis de réaliser le pro lab HTB &ldquo;Offshore&rdquo; pour confirmer mes connaissances en AD et transitionner / apprendre à utiliser les outils sur Linux (Crackmapexec / Impacket / &hellip;).</p>
<p>La certification en vaux vraiment le coup, pour moi c&rsquo;est un Must DO pour les personnes voulant faire de l&rsquo;AD. La certification est totalement overkill pour l&rsquo;OSCP, donc avec ça, vous êtes au moins sûr que l&rsquo;AD de l&rsquo;OSCP est du beurre comparé à celui de la CRTP !</p>
<p>Merci à Nikhil pour avoir créer la CRTP ainsi qu&rsquo;au support de la CRTP pour leur réponse rapide et efficace, ils sont super réactifs et même pour les questions de cours ou de compréhension, ils ont réponses à tout, ce sont des perles !</p>
<h2 id="ressources-utiles-supplémentaires">Ressources utiles supplémentaires<a hidden class="anchor" aria-hidden="true" href="#ressources-utiles-supplémentaires">#</a></h2>
<ul>
<li>TheHackerRecipies : <a href="https://www.thehacker.recipes/">https://www.thehacker.recipes/</a></li>
<li>ADSecurity : <a href="https://adsecurity.org/">https://adsecurity.org/</a></li>
</ul>
<p>Si vous avez des questions sur ce qui est abordé dans le cours ou la comparaison avec l&rsquo;OSCP, n&rsquo;hésitez pas à me contacter sur Discord !</p>
<p>PS : Un retex &ldquo;oral&rdquo; a été réalisé par Xn0 sur le discord des meetups HTB que je conseille à tout le monde de rejoindre. Il a réalisé un retex CRTP et CRTE (le grand frère de la CRTP), retex accessible aux personnes inscrites sur le discord meetup HTB que vous pouvez rejoindre en suivant les instructions sur meetup : <a href="https://www.meetup.com/hack-the-box-meetup-france/">https://www.meetup.com/hack-the-box-meetup-france/</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://kransy.cyberkoopas.fr/">Kransy</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
